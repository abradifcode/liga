
'use strict';(function(){if(!Array.from){Array.from=(function(){var toStr=Object.prototype.toString;var isCallable=function(fn){return typeof fn==='function'||toStr.call(fn)==='[object Function]';};var toInteger=function(value){var number=Number(value);if(isNaN(number)){return 0;}
if(number===0||!isFinite(number)){return number;}
return(number>0?1:-1)*Math.floor(Math.abs(number));};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger);};return function from(arrayLike){var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError('Array.from requires an array-like object - not null or undefined');}
var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=='undefined'){if(!isCallable(mapFn)){throw new TypeError('Array.from: when provided, the second argument must be a function');}
if(arguments.length>2){T=arguments[2];}}
var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==='undefined'?mapFn(kValue,k):mapFn.call(T,kValue,k);}else{A[k]=kValue;}
k+=1;}
A.length=len;return A;};}());}
var inactiveOptions=Array.from(document.querySelectorAll('.language-nav__item--inactive'));var activeOption=document.querySelector('.language-nav__item--active');var languageNav=document.querySelector('.language-nav');var areOptionsHidden=true;var mainMenu=document.querySelector('.main-menu');var menuToggler=document.querySelector('.mobile-menu-toggler');var cabinetNav=document.querySelector('.cabinet-nav');var cabinetToggler=document.querySelector('.cabinet-nav__greeting');var loginBtn=document.querySelector('.login-btn');var startBtn=document.querySelector('.promo-join__btn');var subscriptionBtn=document.querySelector('.subscription__btn');var loginSubmit=document.querySelector('.login__submit');var loginReminderLink=document.querySelector('.login__reminder');var loginRegisterLink=document.querySelector('.login__register');var registerLoginLink=document.querySelector('.register__login');var page=document.querySelector('.page');var loginPopup=document.querySelector('.modal-login');var loginPopupClose=document.querySelector('.login__close');var registerPopup=document.querySelector('.modal-register');var registerPopupClose=document.querySelector('.register__close');var reminderPopup=document.querySelector('.modal-reminder');var reminderPopupClose=document.querySelector('.password-reminder__close');var expandedFiltersToggler=document.querySelector('.filters-bar__expanded-toggler');var expandedFiltersMenu=document.querySelector('.expanded-filters');var EXPANDED_FILTERS_CLOSED_CLASS='expanded-filters--closed';var EXPANDED_FILTERS_OPENED_CLASS='expanded-filters--opened';var MAIN_MENU_CLOSED_CLASS='main-menu--closed';var MAIN_MENU_OPENED_CLASS='main-menu--opened';var CABINET_NAV_OPENED_CLASS='cabinet-nav--opened';var CABINET_NAV_CLOSED_CLASS='cabinet-nav--closed';var MENU_TOGGLER_ACTIVE_CLASS='mobile-menu-toggler--active';var PAGE_UNAUTHORIZED_CLASS='page--unauthorized';var PAGE_AUTHORIZED_CLASS='page--authorized';var LOGIN_POPUP_CLOSED_CLASS='modal-login--closed';var LOGIN_POPUP_OPENED_CLASS='modal-login--opened';var REGISTER_POPUP_CLOSED_CLASS='modal-register--closed';var REGISTER_POPUP_OPENED_CLASS='modal-register--opened';var REMINDER_POPUP_CLOSED_CLASS='modal-reminder--closed';var REMINDER_POPUP_OPENED_CLASS='modal-reminder--opened';var ESC_KEYCODE=27;var LOGIN_PARAMS={popup:loginPopup,closedClass:LOGIN_POPUP_CLOSED_CLASS,openedClass:LOGIN_POPUP_OPENED_CLASS,closeBtn:loginPopupClose,clickHandler:function onLoginCloseBtnClick(){closePopup(PARAMS[0]);},keydownHandler:function onPopupEscPress(evt){isEscEvent(evt,PARAMS[0]);}};var REGISTER_PARAMS={popup:registerPopup,closedClass:REGISTER_POPUP_CLOSED_CLASS,openedClass:REGISTER_POPUP_OPENED_CLASS,closeBtn:registerPopupClose,clickHandler:function onLoginCloseBtnClick(){closePopup(PARAMS[1]);},keydownHandler:function onPopupEscPress(evt){isEscEvent(evt,PARAMS[1]);}};var REMINDER_PARAMS={popup:reminderPopup,closedClass:REMINDER_POPUP_CLOSED_CLASS,openedClass:REMINDER_POPUP_OPENED_CLASS,closeBtn:reminderPopupClose,clickHandler:function onLoginCloseBtnClick(){closePopup(PARAMS[2]);},keydownHandler:function onPopupEscPress(evt){isEscEvent(evt,PARAMS[2]);}};var PARAMS=[LOGIN_PARAMS,REGISTER_PARAMS,REMINDER_PARAMS];mainMenu.classList.remove('main-menu--nojs');cabinetNav.classList.remove('cabinet-nav--nojs');menuToggler.addEventListener('click',function(){onTogglerClick(MAIN_MENU_CLOSED_CLASS,MAIN_MENU_OPENED_CLASS,mainMenu,outsideMainMenuClick);onMobileTogglerClick();});cabinetToggler.addEventListener('click',function(evt){evt.preventDefault();onTogglerClick(CABINET_NAV_CLOSED_CLASS,CABINET_NAV_OPENED_CLASS,cabinetNav,outsideCabinetNavClick);});activeOption.addEventListener('click',onLanguageTogglerClick);inactiveOptions.forEach(function(option){option.addEventListener('click',toggleLanguage);});if(expandedFiltersToggler){expandedFiltersToggler.addEventListener('click',function(evt){evt.preventDefault();onTogglerClick(EXPANDED_FILTERS_CLOSED_CLASS,EXPANDED_FILTERS_OPENED_CLASS,expandedFiltersMenu,outsideExpandedFiltersClick);});}
function showInactive(){inactiveOptions.forEach(function(option){option.classList.remove('language-nav__item--hidden');});areOptionsHidden=false;activeOption.removeEventListener('click',onLanguageTogglerClick);activeOption.addEventListener('click',onShownOptionsTogglerClick);}
function hideInactive(){inactiveOptions.forEach(function(option){option.classList.add('language-nav__item--hidden');});areOptionsHidden=true;activeOption.removeEventListener('click',onShownOptionsTogglerClick);activeOption.addEventListener('click',onLanguageTogglerClick);}
function onLanguageTogglerClick(evt){evt.preventDefault();event.stopPropagation();showInactive();document.addEventListener('click',outsideLanguageNavClick);}
function onShownOptionsTogglerClick(evt){evt.preventDefault();hideInactive();}
function toggleLanguage(evt){evt.preventDefault();if(window.innerWidth<980){showInactive();}
var target=(evt.target.classList.contains('language-nav__link'))?evt.target.parentNode:evt.target;activeOption.classList.remove('language-nav__item--active');activeOption.classList.add('language-nav__item--inactive');activeOption.addEventListener('click',toggleLanguage);activeOption.removeEventListener('click',onShownOptionsTogglerClick);var optionIndex=inactiveOptions.indexOf(target);inactiveOptions[optionIndex]=activeOption;target.classList.remove('language-nav__item--inactive');target.classList.add('language-nav__item--active');target.removeEventListener('click',toggleLanguage);target.addEventListener('click',onLanguageTogglerClick);activeOption=target;hideInactive();}
function onTogglerClick(closedClass,openedClass,affectOn,outsideClickListener){event.stopPropagation();if(affectOn.classList.contains(closedClass)){affectOn.classList.remove(closedClass);affectOn.classList.add(openedClass);document.addEventListener('click',outsideClickListener);return;}
affectOn.classList.add(closedClass);affectOn.classList.remove(openedClass);}
function onMobileTogglerClick(){if(menuToggler.classList.contains(MENU_TOGGLER_ACTIVE_CLASS)){menuToggler.classList.remove(MENU_TOGGLER_ACTIVE_CLASS);return;}
menuToggler.classList.add(MENU_TOGGLER_ACTIVE_CLASS);}
loginBtn.addEventListener('click',onLoginBtnClick);if(startBtn){startBtn.addEventListener('click',onLoginBtnClick);}
if(subscriptionBtn){subscriptionBtn.addEventListener('click',onLoginBtnClick);}
function onLoginBtnClick(evt){evt.preventDefault();openPopup(PARAMS[0]);loginReminderLink.addEventListener('click',onReminderLinkClick);loginRegisterLink.addEventListener('click',onRegisterLinkClick);loginSubmit.addEventListener('click',onLoginSubmitClick);}
function onReminderLinkClick(evt){evt.preventDefault();closePopup(PARAMS[0]);openPopup(PARAMS[2]);}
function onRegisterLinkClick(evt){evt.preventDefault();closePopup(PARAMS[0]);openPopup(PARAMS[1]);registerLoginLink.addEventListener('click',onLoginLinkClick);}
function onLoginSubmitClick(evt){evt.preventDefault();closePopup(PARAMS[0]);page.classList.remove(PAGE_UNAUTHORIZED_CLASS);page.classList.add(PAGE_AUTHORIZED_CLASS);loginBtn.removeEventListener('click',onLoginBtnClick);if(startBtn){startBtn.removeEventListener('click',onLoginBtnClick);}
if(subscriptionBtn){subscriptionBtn.removeEventListener('click',onLoginBtnClick);}
loginReminderLink.removeEventListener('click',onReminderLinkClick);loginRegisterLink.removeEventListener('click',onRegisterLinkClick);loginSubmit.removeEventListener('click',onLoginSubmitClick);registerLoginLink.removeEventListener('click',onLoginLinkClick);}
function onLoginLinkClick(evt){evt.preventDefault();closePopup(PARAMS[1]);openPopup(PARAMS[0]);}
function outsideCabinetNavClick(evt){var target=evt.target===cabinetToggler||cabinetToggler.contains(evt.target);if(window.innerWidth>749&&!target&&cabinetNav.classList.contains(CABINET_NAV_OPENED_CLASS)){cabinetNav.classList.remove(CABINET_NAV_OPENED_CLASS);cabinetNav.classList.add(CABINET_NAV_CLOSED_CLASS);document.removeEventListener('click',outsideCabinetNavClick);}}
function outsideMainMenuClick(evt){var target=evt.target===mainMenu||mainMenu.contains(evt.target);if(window.innerWidth<980&&!target&&mainMenu.classList.contains(MAIN_MENU_OPENED_CLASS)){mainMenu.classList.remove(MAIN_MENU_OPENED_CLASS);mainMenu.classList.add(MAIN_MENU_CLOSED_CLASS);menuToggler.classList.remove(MENU_TOGGLER_ACTIVE_CLASS);document.removeEventListener('click',outsideMainMenuClick);}}
function outsideLanguageNavClick(evt){var target=evt.target===languageNav||languageNav.contains(evt.target);if(window.innerWidth>979&&!target&&!areOptionsHidden){hideInactive();document.removeEventListener('click',outsideLanguageNavClick);}}
function outsideExpandedFiltersClick(evt){var target=evt.target===expandedFiltersMenu||expandedFiltersMenu.contains(evt.target);if(!target&&expandedFiltersMenu.classList.contains(EXPANDED_FILTERS_OPENED_CLASS)){expandedFiltersMenu.classList.remove(EXPANDED_FILTERS_OPENED_CLASS);expandedFiltersMenu.classList.add(EXPANDED_FILTERS_CLOSED_CLASS);document.removeEventListener('click',outsideExpandedFiltersClick);}}
function openPopup(params){params.popup.classList.remove(params.closedClass);params.popup.classList.add(params.openedClass);params.closeBtn.addEventListener('click',params.clickHandler);document.addEventListener('keydown',params.keydownHandler);page.classList.add('page--no-scroll');}
function closePopup(params){params.popup.classList.add(params.closedClass);params.popup.classList.remove(params.openedClass);params.closeBtn.removeEventListener('click',params.clickHandler);document.removeEventListener('keydown',params.keydownHandler);page.classList.remove('page--no-scroll');}
function isEscEvent(evt,params){if(evt.keyCode===ESC_KEYCODE){closePopup(params)}}})();